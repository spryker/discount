{% extends '@Gui/Layout/layout.twig' %}

{% set section_title = 'Generated Vouchers View' %}

{% block action %}
    {{ backActionButton('/discount/pool', 'Back to Vouchers' | trans) }}
    {{ viewActionButton('/discount/voucher/export?id-pool=' ~ idPool, 'Export' | trans) }}
{% endblock %}

{% block content %}

    {% embed '@Gui/Partials/widget.twig' with { widget_title: section_title } %}

        {% block widget_content %}

            <table class="table table-striped table-bordered table-hover">
                <tr>
                    <td>{{ 'Valid from' | trans }}</td>
                    <td>{{ discount.validFrom | date }}</td>
                </tr>
                <tr>
                    <td>{{ 'Valid until' | trans }}</td>
                    <td>{{ discount.validTo | date }}</td>
                </tr>
                <tr>
                    <td>{{ 'Value' | trans }}</td>
                    <td>{% if discount.calculatorPlugin == 'PLUGIN_CALCULATOR_PERCENTAGE' %}{{ discount.amount }} %{% else %}{{ discount.amount | currency }} {% endif %}</td>
                </tr>
                <tr>
                    <td>{{ 'Generated Vouchers' | trans }}</td>
                    <td>{{ countVouchers }}</td>
                </tr>
            </table>

        {% endblock %}

    {% endembed %}

    {% embed '@Gui/Partials/widget.twig' with { widget_title: 'Generated Codes' } %}

        {% block widget_header_content %}
            {% if batchValue is not null %}
            {{ viewActionButton(url('/discount/voucher/export', {'id-pool': idPool, 'batch': batchValue}), 'Export Generated Codes' | trans) }}
            {% endif %}
        {% endblock %}

        {% block widget_content %}

            {{ generatedCodes | raw }}

        {% endblock %}

    {% endembed %}

{% endblock %}
